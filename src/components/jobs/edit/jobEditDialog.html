<template>
    <require from="aurelia-dialog/ux-dialog"></require>
    
    <ux-dialog class="r-dialog r-job-edit-dialog">
        <div class="r-dialog-row r-no-margin">
            <h1 class="r-dialog-header">Edit Job</h1>
        </div>
        <div class="r-dialog-row r-dialog-half-row-left">
            <div class="r-dialog-row r-no-margin">
                <span class="r-dialog-body">Job Details</span>
            </div>
            <div class="r-dialog-row r-component-row">
                    <div class="r-dialog-label">Name</div>
                    <input class="r-dialog-control r-with-label" value.bind="job.name" />
            </div>
            <div class="r-dialog-row r-component-row">
                <div class="r-dialog-label">Source Host</div>
                <input disabled class="r-dialog-control r-with-label r-disabled" value.bind="job.job_source_host.name" />
            </div>
            <div class="r-dialog-row r-component-row">
                <div class="r-dialog-label">Virtual Machine</div>
                <input disabled class="r-dialog-control r-with-label r-disabled" value.bind="job.job_virtual_machine.name" />
            </div>
            <div class="r-dialog-row r-component-row">
                <div class="r-dialog-label">Target Host</div>
                <input disabled class="r-dialog-control r-with-label r-disabled" value.bind="job.job_target_host.name" />
            </div>
            <div class="r-dialog-row r-component-row">
                <div class="r-dialog-label">Source Location</div>
                <input disabled class="r-dialog-control r-with-label r-disabled" value.bind="job.source_location" />
            </div>
            <div class="r-dialog-row r-component-row"></div>
            <div class="r-dialog-row r-component-row"></div>
        </div>
        <div class="r-dialog-row r-dialog-half-row-right">
            <div class="r-dialog-row r-no-margin">
                <span class="r-dialog-body">Schedule and Retention</span>
            </div>
            <div class="r-dialog-row r-component-row">
                <select class="form-control r-dialog-control" value.bind="job.schedule_id" change.delegate="set_default_retentions()">
                    <option model.bind="null">Schedule</option>
                    <option model.bind="schedule.id" repeat.for="schedule of schedules" >${schedule.display_name}</option>
                </select>
            </div>
            <div class="r-dialog-row r-component-row">
                <div class="r-dialog-label">Offset</div>
                <input type="number" class="r-dialog-control r-with-label" value.bind="job.offset" />
            </div>
            <div class="r-dialog-row r-dialog-half-row-left">
                <div class="r-dialog-row r-no-margin">
                    <span class="r-dialog-body">Source</span>
                </div>
                <div class="r-dialog-row r-component-row">
                    <div class="r-dialog-label r-large-label">15 Min</div>
                    <input disabled.bind="canEdit.quarter_hourly" type="number" class="r-dialog-control r-with-large-label ${ canEdit.quarter_hourly == true ? 'r-disabled' : '' }" value.bind="source.fifteen" />
                </div>
                <div class="r-dialog-row r-component-row">
                    <div class="r-dialog-label r-large-label">Hourly</div>
                    <input disabled.bind="canEdit.hourly" type="number" class="r-dialog-control r-with-large-label ${ canEdit.hourly == true ? 'r-disabled' : '' }" value.bind="source.hourly" />
                </div>
                <div class="r-dialog-row r-component-row">
                    <div class="r-dialog-label r-large-label">Daily</div>
                    <input disabled.bind="canEdit.daily" type="number" class="r-dialog-control r-with-large-label ${ canEdit.daily == true ? 'r-disabled' : '' }" value.bind="source.daily" />
                </div>
                <div class="r-dialog-row r-component-row">
                    <div class="r-dialog-label r-large-label">Weekly</div>
                    <input disabled.bind="canEdit.weekly" type="number" class="r-dialog-control r-with-large-label ${ canEdit.weekly == true ? 'r-disabled' : '' }" value.bind="source.weekly" />
                </div>
                <div class="r-dialog-row r-component-row">
                    <div class="r-dialog-label r-large-label">Monthly</div>
                    <input disabled.bind="canEdit.monthly" type="number" class="r-dialog-control r-with-large-label ${ canEdit.monthly == true ? 'r-disabled' : '' }" value.bind="source.monthly" />
                </div>
            </div>    
            <div class="r-dialog-row r-dialog-half-row-right">
                    <div class="r-dialog-row r-no-margin">
                        <span class="r-dialog-body">Target</span>
                    </div>
                <div class="r-dialog-row r-component-row">
                    <div class="r-dialog-label r-large-label">15 Min</div>
                    <input disabled.bind="canEdit.quarter_hourly" type="number" class="r-dialog-control r-with-large-label ${ canEdit.quarter_hourly == true ? 'r-disabled' : '' }" value.bind="target.fifteen" />
                </div>
                <div class="r-dialog-row r-component-row">
                    <div class="r-dialog-label r-large-label">Hourly</div>
                    <input disabled.bind="canEdit.hourly" type="number" class="r-dialog-control r-with-large-label ${ canEdit.hourly == true ? 'r-disabled' : '' }" value.bind="target.hourly" />
                </div>
                <div class="r-dialog-row r-component-row">
                    <div class="r-dialog-label r-large-label">Daily</div>
                    <input disabled.bind="canEdit.daily" type="number" class="r-dialog-control r-with-large-label ${ canEdit.daily == true ? 'r-disabled' : '' }" value.bind="target.daily" />
                </div>
                <div class="r-dialog-row r-component-row">
                    <div class="r-dialog-label r-large-label">Weekly</div>
                    <input disabled.bind="canEdit.weekly" type="number" class="r-dialog-control r-with-large-label ${ canEdit.weekly == true ? 'r-disabled' : '' }" value.bind="target.weekly" />
                </div>
                <div class="r-dialog-row r-component-row">
                    <div class="r-dialog-label r-large-label">Monthly</div>
                    <input disabled.bind="canEdit.monthly" type="number" class="r-dialog-control r-with-large-label ${ canEdit.monthly == true ? 'r-disabled' : '' }" value.bind="target.monthly" />
                </div>
            </div>  
        </div>
        <div class="r-dialog-row r-no-margin r-dialog-footer">
            <button class="btn btn-default r-left" type="button" style="margin-top: 60px;" click.delegate="dialogController.cancel()">Cancel</button>
            <button class="btn btn-primary r-right" type="button" click.delegate="submit()">Save</button>
        </div>
    </ux-dialog>   
</template>